<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
  </configSections>
  <log4net>
    <appender name="rollingFile" type="log4net.Appender.RollingFileAppender, log4net">
      <param name="File" value="Log/log.txt" />
      <param name="AppendToFile" value="true" />
      <param name="RollingStyle" value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="1000KB" />
      <param name="StaticLogFileName" value="true" />
      <layout type="log4net.Layout.PatternLayout, log4net">
        <param name="ConversionPattern" value="%d [%t] %-5p %c [%x] &lt;%X{auth}> - %m%n" />
      </layout>
    </appender>
    <root>
      <priority value="ALL" />
      <appender-ref ref="rollingFile" />
    </root>
  </log4net>
  <connectionStrings>
    <add name="BiblosDS" connectionString="metadata=res://*/Model.BiblosDSEntityFramework.csdl|res://*/Model.BiblosDSEntityFramework.ssdl|res://*/Model.BiblosDSEntityFramework.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=SRVGEDDEV9999.CLOUDAPP.NET;Initial Catalog=BiblosDS2010;User ID=DocSuite;Password=Passw0rd;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
  <appSettings>
    <add key="ServerName" value="" />
    <add key="PathCache" value="" />
    <add key="BoblosDSConvWs.BiblosDSConv" value="" />
    <add key="BiblosDSConvWsUrl" value="" />
    <add key="VerifyDocumentMainDate" value="true" />
    <add key="AllowZeroByteDocument" value="true" />
    <add key="PreservationAutoClose" value="false" />
    <add key="BoblosDSConvWs.BiblosDSConv" value="" />
    <add key="JournalEnabled" value="false" />
  </appSettings>
  <!--
    For a description of web.config changes see http://go.microsoft.com/fwlink/?LinkId=235367.

    The following attributes can be set on the <httpRuntime> tag.
      <system.Web>
        <httpRuntime targetFramework="4.6.1" />
      </system.Web>
  -->
  <system.web>
    <httpRuntime maxRequestLength="2147483647" useFullyQualifiedRedirectUrl="true"/>
    <compilation targetFramework="4.6.1"/>
    <authentication mode="Forms"/>
    <pages controlRenderingCompatibilityVersion="4.0"/>
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Headers" value="Content-Type, Authorization, Accept, X-Requested-With" />
        <add name="Access-Control-Allow-Methods" value="GET, POST, PUT, DELETE, OPTIONS" />
      </customHeaders>
    </httpProtocol>
    <handlers>
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="2147483647"/>
      </requestFiltering>
    </security>
  </system.webServer>
  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true"/>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpStreamedBinding" transferMode="Streamed" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647">
          <readerQuotas maxDepth="128" maxStringContentLength="2147483647" maxArrayLength="2147483647" />
          <security mode="None" />
        </binding>
      </basicHttpBinding>
      <netNamedPipeBinding>
        <binding name="NetNamedPipeStreamedBinding" transferMode="Streamed" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647">
          <readerQuotas maxDepth="128" maxStringContentLength="2147483647" maxArrayLength="2147483647" />
          <security mode="None" />
        </binding>
      </netNamedPipeBinding>
      <netTcpBinding>
        <binding name="NetTcpBufferedBinding" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647">
          <readerQuotas maxDepth="128" maxStringContentLength="2147483647" maxArrayLength="2147483647" />
          <security mode="None" />
        </binding>
        <binding name="NetTcpStreamedBinding" transferMode="Streamed" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647">
          <readerQuotas maxDepth="128" maxStringContentLength="2147483647" maxArrayLength="2147483647" />
          <security mode="None" />
        </binding>
      </netTcpBinding>
    </bindings>

    <client>
      <endpoint address="net.tcp://localhost:8087" binding="netTcpBinding" bindingConfiguration="NetTcpStreamedBinding" contract="ServiceReferenceDigitalSign.IServiceDigitalSign" name="ServiceDigitalSign" />
      <endpoint address="net.tcp://localhost:8085" binding="netTcpBinding" bindingConfiguration="NetTcpStreamedBinding" contract="ServiceReferenceDocument.IServiceDocument" name="ServiceDocument" />
      <endpoint address="net.tcp://localhost:8086" binding="netTcpBinding" bindingConfiguration="NetTcpStreamedBinding" contract="ServiceReferenceStorage.IServiceDocumentStorage" name="ServiceDocumentStorage" />
    </client>

    <services>
      <service behaviorConfiguration="ContentAdministrationBehavior" name="Administration">
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="BasicHttpStreamedBinding" contract="VecompSoftware.ServiceContract.BiblosDS.Documents.IAdministration" />
      </service>
      <service behaviorConfiguration="ContentLogBehavior" name="Log">
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="BasicHttpStreamedBinding" contract="VecompSoftware.ServiceContract.BiblosDS.Logs.ILog" />
      </service>
      <service behaviorConfiguration="ContentSearchBehavior" name="ContentSearch">
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="BasicHttpStreamedBinding" contract="VecompSoftware.ServiceContract.BiblosDS.Documents.IContentSearch" />
      </service>
      <service behaviorConfiguration="DigitalSignatureBehavior" name="DigitalSignature">
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="BasicHttpStreamedBinding" contract="VecompSoftware.ServiceContract.BiblosDS.Signs.IServiceDigitalSign" />
      </service>
      <service behaviorConfiguration="DocumentsBehavior" name="Documents">
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="BasicHttpStreamedBinding" contract="VecompSoftware.ServiceContract.BiblosDS.Documents.IDocuments" />
      </service>
      <service behaviorConfiguration="PreservationBehavior" name="Preservation">
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="BasicHttpStreamedBinding" contract="VecompSoftware.ServiceContract.BiblosDS.Preservations.IPreservation" />
      </service>
      <service behaviorConfiguration="TransitBehavior" name="Transit">
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="BasicHttpStreamedBinding" contract="VecompSoftware.ServiceContract.BiblosDS.Documents.ITransit" />
      </service>
      <service behaviorConfiguration="PreservationAdministrationBehavior" name="PreservationAdministration">
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="BasicHttpStreamedBinding" contract="VecompSoftware.ServiceContract.BiblosDS.Preservations.IPreservationAdministration" />
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="ContentLogBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <dataContractSerializer maxItemsInObjectGraph="6553600" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
        <behavior name="ContentAdministrationBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <dataContractSerializer maxItemsInObjectGraph="6553600" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
        <behavior name="ServiceBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <dataContractSerializer maxItemsInObjectGraph="6553600" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
        <behavior name="ContentSearchBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <dataContractSerializer maxItemsInObjectGraph="6553600" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
        <behavior name="DigitalSignatureBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <dataContractSerializer maxItemsInObjectGraph="6553600" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
        <behavior name="DocumentsBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <dataContractSerializer maxItemsInObjectGraph="6553600" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
        <behavior name="PreservationBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <dataContractSerializer maxItemsInObjectGraph="6553600" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
        <behavior name="TransitBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <dataContractSerializer maxItemsInObjectGraph="6553600" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
        <behavior name="PreservationAdministrationBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <dataContractSerializer maxItemsInObjectGraph="6553600" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.WindowsAzure.ServiceRuntime" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-2.5.0.0" newVersion="2.5.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="msshrtmi" culture="neutral" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="0.0.0.0-2.3.0.0" newVersion="1.7.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration>