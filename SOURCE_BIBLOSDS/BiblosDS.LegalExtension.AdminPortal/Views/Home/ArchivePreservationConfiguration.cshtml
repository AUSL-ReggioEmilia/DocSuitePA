@model BiblosDS.LegalExtension.AdminPortal.ViewModel.ArchivePreservationConfigurationViewModel

@{
    ViewBag.Title = "Configurazione Archivio";
}

@section featured {
    <hgroup class="title">
        <h1>@ViewBag.Title <b>@Model.Archive.Name</b></h1>
    </hgroup>
}

<div style="float:left; margin: 10px; padding: 5px">
    <table class="form-table k-block">
        <tr>
            <td>Verifica Incrementale abilitata</td>
            <td>@Html.CheckBox("verifyIncrementalEnabled", @Model.Archive.VerifyPreservationIncrementalEnabled, new { @disabled = "disabled" })</td>
        </tr>
        <tr>
            <td>Verifica Data abilitata</td>
            <td>@Html.CheckBox("verifyDateEnabled", @Model.Archive.VerifyPreservationDateEnabled, new { @disabled = "disabled" })</td>
        </tr>
        <tr>
            <td>Tipologia documenti conservati</td>
            <td>@Html.Label("documentType", @Model.Archive.FiscalDocumentType.ToString())</td>
        </tr>
        <tr>
            <td>Transito abilitato</td>
            <td>@Html.CheckBox("transitEnable", @Model.Archive.TransitoEnabled, new { @disabled = "disabled" })</td>
        </tr>
    </table>
</div>
<div style="margin: -10px; padding: 5px">
@using (Html.BeginForm("SetArchivePreservationConfiguration", "Home", FormMethod.Post))
{
    @Html.ValidationSummary(false)

    <input type="hidden" name="idArchive" value="@Model.Archive.IdArchive" />

    <table class="form-table k-block">
        <tr>
            <td>Data inizio prima conservazione (Giorno/Mese/Anno)</td>
            <td>
              @(Html.Kendo().NumericTextBox()
                .Name("firstConservationDay")
                .Format("00")
                .Decimals(0)
                .Min(1)
                .Max(31)
                .Value(Model.ArchiveConfiguration.PreservationLimitTaskToDocumentDate.Value.Day))
            </td>
            <td>
                @(Html.Kendo().NumericTextBox()
                .Name("firstConservationMonth")
                .Format("00")
                .Decimals(0)
                .Min(1)
                .Max(12)
                .Value(Model.ArchiveConfiguration.PreservationLimitTaskToDocumentDate.Value.Month))
            </td>
            <td>
                @(Html.Kendo().NumericTextBox()
                .Name("firstConservationYear")
                .Format("0000")
                .Decimals(0)
                .Min(DateTime.MinValue.Year)
                .Max(DateTime.MaxValue.Year)
                .Value(Model.ArchiveConfiguration.PreservationLimitTaskToDocumentDate.Value.Year))
            </td>
        </tr>
        <tr>
            <td>Ricalcola incrementale (Da abilitare per archivi tipo PEC)</td>
            <td>@Html.CheckBox("forceAutoInc", @Model.ArchiveConfiguration.ForceAutoInc)</td>
        </tr>

        <tr>
            <td>Chiusura automatica conservazione</td>
            <td>@Html.CheckBox("autoClose", @Model.ArchiveConfiguration.PreservationAutoClose)</td>
        </tr>
        <tr>
            <td>Genera task successivo</td>
            <td>@Html.CheckBox("generateTask", @Model.ArchiveConfiguration.AutoGeneratedNextTask)</td>
        </tr>
        <tr>
            <td>Chiusura senza verifica conservazione</td>
            <td>@Html.CheckBox("closeWithoutVerify", @Model.ArchiveConfiguration.CloseWithoutVerify)</td>
        </tr>
        <tr>
            <td>Controlla file .tsd</td>
            <td>@Html.CheckBox("checkTsd", @Model.ArchiveConfiguration.CheckTsd)</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td colspan="2">
                <input type="submit" class="k-button" value="Salva" />
            </td>
        </tr>
    </table>
}
    </div>

